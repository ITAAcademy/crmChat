"use strict";var springChatServices=angular.module("springChat.services",[]);springChatServices.factory("ChatSocket",["$rootScope",function(n){var t,e={init:function(n){var e=new SockJS(n,null,{transports:["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"]});t=Stomp.over(e)},disconnect:function(){t.disconnect()},connect:function(e,o){t.connect({},function(t){n.$apply(function(){e(t)})},function(t){n.$apply(function(){o(t)})})},subscribe:function(e,o){var i=t.subscribe(e,function(t){n.$apply(function(){o(t)})});return i},send:function(n,e,o){t.send(n,e,o)}};return e}]),springChatServices.service("AskWindow",["$rootScope","ngDialog","$timeout","$http","$injector",function(n,t,e,o,i){var s,r,c,a;this.setLinks=function(n,t){"undefined"!=typeof n&&(c=n,"undefined"!=typeof t&&(a=t))},this.setAskObject=function(t){n.askObject=t,this.setLinks(t.yesLink,t.noLink)},this.showAskWindow=function(){var n=i.get("UserFactory");r=t.open({template:"askTenantToTakeConsultationWindow.html"}),n.setTenantBusy(),e.cancel(s),s=e(function(){null!=r&&r.close()},TIME_FOR_WAITING_ANSWER_FROM_TENANT)},n.answerToTakeConsultation=function(n){e.cancel(this.hideAskTenantToTakeConsultation_tenantNotRespond),r.close(),n?o.post(serverPrefix+c).success(function(n,t,e,o){}).error(function(n,t,e,o){alert("error : "+t)}):o.post(serverPrefix+a).success(function(n,t,e,o){}).error(function(n,t,e,o){alert("error : "+t)})}}]);