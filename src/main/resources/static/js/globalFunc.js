"use strict";function toArray(e){return angular.isArray(e)?e:Object.keys(e).map(function(t){return e[t]})}function getCurrentTime(){var e=new Date,t=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return t+":"+a+":"+r}function formatDateToTime(e){var t=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return t+":"+a+":"+r}function getPropertyByValue(e,t){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===t)return a}function getIdInArrayFromObjectsMap(e,t,a){for(var r in e)if(e[r][t]==a)return r}function getRoomById(e,t){for(var a=0;a<e.length;a++)if(e[a].roomId==t)return e[a]}function uploadXhr(e,t,a,r,n){var o=getXmlHttp();o.upload.onprogress=function(e){n(e,o.upload.loaded)},o.onload=o.onerror=function(){200==this.status?(console.log("SUCCESS:"+o.responseText),a(o.responseText)):(console.log("error "+this.status),r(o))},o.open("POST",t);for(var u=(String(Math.random()).slice(2),new FormData),i=0;i<e.length;i++)u.append("file"+i,e[i]);o.send(u)}function upload(e,t,a){for(var r=new FormData,n=0;n<t.length;n++)r.append("file"+n,t[n]);return e.post(a,r,{transformRequest:function(e,t){return e},headers:{"Content-Type":void 0}}).error(function(e,t){console.log("Error ... "+t)})}function getXmlHttp(){var e;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e&&e.upload||"undefined"==typeof XMLHttpRequest||(e=new XMLHttpRequest),e}function replacer(e,t,a){return"{{call("+e.substring(2,e.length-4)+")}}"}function call(e){return"{{"+e+"}}"}function getKeyByValue(e,t){for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e)return a}function getType(e){return e===!0||e===!1||"true"==e||"false"==e?"bool":Array.isArray(e)?"array":isDate(e)?"date":"string"}function parseBoolean(e){return"true"==e}function Color(e){this.val=e}function send(e,t,a,r){var n=getXmlHttp();n.open("POST",serverPrefix+e,!0),n.onreadystatechange=function(){4==n.readyState||"complete"==n.readyState?a():r()},n.send(t)}function htmlEscape(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlUnescape(e){return e.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var MAX_UPLOAD_FILE_SIZE_BYTES=1024e5,TIME_FOR_WAITING_ANSWER_FROM_TENANT=3e4,daysName={},hoursName={},minutesName={},dayName={},hourName={},minuteName={},daysNameShort={},hoursNameShort={},minutesNameShort={},dayNameShort={},hourNameShort={},minuteNameShort={},endName={};daysName.ua=" днів",dayName.ua=" день",daysName.en=" day",dayName.en=" days",daysName.ru=" дней",dayName.ru=" день",hoursName.ua=" годин",hourName.ua=" годину",hoursName.en=" hour",hourName.en=" hours",hoursName.ru=" часов",hourName.ru="час",minutesName.ua=" хвилин ",minuteName.ua=" хвилину ",minutesName.en=" minutes ",minuteName.en=" minute ",minutesName.ru=" минут ",minuteName.ru=" минуту ",daysNameShort.ua=" дн.",daysNameShort.en=" d.",daysNameShort.ru=" дн.",hoursNameShort.ua=" год.",hoursNameShort.en=" h",hoursNameShort.ru=" час.",minutesNameShort.ua=" хв. ",minutesNameShort.en=" min ",minutesNameShort.ru=" мин. ",endName.ua=" тому",endName.en=" ago",endName.ru=" спустя";var ROOM_PERMISSIONS={ADD_USER:1,REMOVE_USER:2},checkIfToday=function(e){var t=new Date(e),a=new Date;return t.setHours(0,0,0,0)==a.setHours(0,0,0,0)},checkIfYesterday=function(e){var t=new Date(e),a=new Date;return a.setDate(a.getDate()-1),a.getDate()==t.getDate()&&a.getMonth()==t.getMonth()&&a.getFullYear()==t.getFullYear()},isSameDay=function(e,t){if(void 0==e&&void 0==t)return!0;var a=new Date(e),r=new Date(t);return a.getDate()==r.getDate()&&a.getMonth()==r.getMonth()&&a.getFullYear()==r.getFullYear()},getNameFromRandomizedUrl=function(e){var t="file_name=",a=e.lastIndexOf(t)+t.length,r=e.length-DEFAULT_FILE_PREFIX_LENGTH;return e.substring(a,r)},getNameFromUrl=function(e){var t="file_name=",a=e.lastIndexOf(t)+t.length,r=e.length;return e.substring(a,r)},firstLetter=function(e){if(void 0!=e)return e.toUpperCase().charAt(0)},formatDateWithLast=function(e,t,a,r){if(void 0==t&&(t=!1),void 0==a&&(a=!1),void 0==r&&(r=60),null==e||void 0==e)return"";var n=new Date(e);if(null==n||void 0==n||isNaN(n))return"";var o=(new Date).getTime()-n.getTime();if(o>6e4*r)return formatDate(e,t,a);if(0==Math.round(o/6e4))return"щойно";var u=Math.round(o/6e4);if(t)return u<60?u+minutesNameShort[globalConfig.lang]:Math.ceil(u/60)<24?Math.ceil(u/60)+hoursNameShort[globalConfig.lang]:Math.ceil(u/1440)+daysNameShort[globalConfig.lang];if(u>1){if(u<60)return u+minutesName[globalConfig.lang]+endName[globalConfig.lang];var i=Math.ceil(u/60);if(i<24)return i>1?i+hoursName[globalConfig.lang]+endName[globalConfig.lang]:i+hourName[globalConfig.lang]+endName[globalConfig.lang];var l=Math.ceil(i/24);return l>1?l+daysName[globalConfig.lang]+endName[globalConfig.lang]:l+dayName[globalConfig.lang]+endName[globalConfig.lang]}return u+minuteName[globalConfig.lang]+endName[globalConfig.lang]},differenceInSecondsBetweenDates=function(e,t){var a=e.getTime()-t.getTime(),r=a/1e3,n=Math.abs(r);return n},formatDate=function(e,t,a){void 0==t&&(t=!1);var r={};r.ua=["Січеня","Лютого","Березеня ","Квітня","Травня ","Червня ","Липня","Серпня","Вересеня","Жовтеня","Листопада","Груденя"],r.en=["January","February","March","April","May","June","July","August","September","October","November","December"],r.ru=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"];var n=new Date(e),o=n.getDate(),u=n.getMonth(),i=(n.getFullYear(),n.getMinutes());if(i<10&&(i="0"+i),t)return u+1<10?o+".0"+(u+1):o+"."+(u+1);var l=o+" "+r[globalConfig.lang][u];return a||(l+=" "+n.getHours()+":"+i),l},curentDateInJavaFromat=function(){var e=new Date,t=e.getDate();t<"10"&&(t="0"+t);var a=e.getMonth()+1;a<"10"&&(a="0"+a);var r=e.getFullYear()+"-"+a+"-"+t+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+".0";return r},Operations=Object.freeze({send_message_to_all:"SEND_MESSAGE_TO_ALL",send_message_to_user:"SEND_MESSAGE_TO_USER",add_user_to_room:"ADD_USER_TO_ROOM",add_room:"ADD_ROOM",add_room_from_tenant:"ADD_ROOM_FROM_TENANT",add_room_on_login:"ADD_ROOM_ON_LOGIN"}),serverPrefix="/crmChat",DEFAULT_FILE_PREFIX_LENGTH=15,substringMatcher=function(e){return function(t,a){var r;r=[],substrRegex=new RegExp(t,"i"),$.each(e,function(e,t){substrRegex.test(t)&&r.push(t)}),a(r)}},isDate=function(e){return e instanceof Date};