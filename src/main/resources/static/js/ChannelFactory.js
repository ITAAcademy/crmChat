"use strict";springChatServices.factory("ChannelFactory",["$rootScope","$timeout","$location","$http","toaster","ChatSocket",function(t,o,n,e,r,c){var i,s=!0,a=!1,u=function(){return a},f=function(t){i=t},l=function(t){var o=0==a&&1==t;a=t,o&&null!=i&&i()};return{isSocketSupport:function(){return s},changeLocation:function(t){n.path(t),console.log("Change location:"+n.path())},subscribeToConnect:function(t){if(0==a){console.log("serverPrefix");var o=function(o){t(s,o)};c.init(serverPrefix+"/wss"),c.connect(o,function(o){0==a&&(s=!1,t(s,{}))})}else r.pop("error","Error","Websocket not supportet or server not exist"+error,99999),changeLocation("/")},getIsInited:u,setIsInited:l,setIsInitedCallback:f}}]);