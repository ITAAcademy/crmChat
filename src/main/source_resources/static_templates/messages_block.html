<!-- Сьогоднішні повідомлення -->
<div ng-repeat-start="message in (orderedMsgs = (messages() | orderBy : 'date'))" class="message_date_separator" ng-if="checkIfToday(message.date) &amp;&amp; (checkIfToday(message.date) != checkIfToday(messages()[$index-1].date))">
    <div class="line"></div>
    <div class="big_dot"></div>
    <span class="date_indicator" th:text="${lgPack.msgBox.today}">Сьогодні</span>
    <div class="big_dot"></div>
    <div class="line"></div>
</div>
<div class="message_date_separator" ng-if="checkIfYesterday(message.date)">
    <div class="line"></div>
    <div class="big_dot"></div>
    <span class="date_indicator" th:text="${lgPack.msgBox.yesterday}">Вчора</span>
    <div class="big_dot"></div>
    <div class="line"></div>
</div>
<div class="message_date_separator" ng-if="!needShowDayDivided(message.date, orderedMsgs[$index - 1].date)">
    <div class="line"></div>
    <div class="big_dot"></div>
    <span class="date_indicator">{{::$root.formatDateWithLast(message.date, false, true)}}</span>
    <div class="big_dot"></div>
    <div class="line"></div>
</div>
<div class="user_message" ng-class="message.position ? 'answer right' : 'answer left'" ng-repeat-end="">
    <div class="message_author_avatar" ng-if="!message.position" ng-click="$root.showUserProfileByChatUserId(message.author.id)">
        <div ng-style="{'background-image':'url(' + $root.imagesPath + '/avatars/' + message.author.avatar + ')'}"></div>
    </div>
    <div class="message_details">
        <div class="top_details">
            <span class="messag_author_name">{{::message.author.nickName}}</span>
            <span class="message_date" ng-bind="$root.formatDateWithLast(message.date, false, false, 3600)"></span>
            <span ng-if="message.author.id == UserFactory.getChatUserId()" class="message_state">{{RoomsFactory.lastMsgIsReaded() ? 'прочитано' : 'доставлено'}}</span>
        </div>
        <compilable ng-if="message.author.id != 0" class="bottom_details" content="parseMsg(message.body)" time="message.date"></compilable>
        <div ng-if="message.author.id == 0" bot-container=" " style="margin: 0px;" content="message.body" time="message.date"></div>
        <hr ng-if="message.attachedFiles.length > 0 &amp;&amp; message.body != ' ' " />
        <div class="display-file-container" ng-repeat="file in message.attachedFiles track by $index" file-miniature="true" link="file">
        </div>
        <div class="like_wrapper noselect" ng-class="{'nolike':message.dislikes < 1 &amp;&amp; message.likes < 1}">
            <a ng-click="likeMessage(message)" class="like_button" ng-class="{'selected':isMessageLiked(message.id)}">
                <i class="material-icons">thumb_up</i>
                <span>{{message.likes}}</span>
            </a>
            <a ng-click="dislikeMessage(message)" class="like_button" ng-class="{'selected':isMessageDisliked(message.id)}">
                <i class="material-icons">thumb_down</i>
                <span>{{message.dislikes}}</span>
            </a>
        </div>
    </div>
    <div class="message_author_avatar" ng-if="message.position" ng-click="$root.showUserProfileByChatUserId(message.author.id)">
        <div ng-style="{'background-image':'url(' + $root.imagesPath + '/avatars/' + message.author.avatar + ')'}"></div>
    </div>
</div>
<!-- //Сьогоднішні повідомлення -->
